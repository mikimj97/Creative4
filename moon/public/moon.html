<!DOCTYPE html>
<html>

<head>
    <title>Moon Phases</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <p>Hello World</p>

    <form>
        <div class="form-inline">
            Enter a date: <input type="text" value="" id="dateForm" class="form-control mr-sm-2 ml-sm-2" style="width:10%" placeholder="Ex:10/31/2018" />
            Enter a location: <input type="text" id="locationForm" class="form-control mr-sm-2 ml-sm-2" style="width:10%" placeholder="Ex: New York, NY"/>
            <button class="btn btn-primary" id="moonButton">Submit</button>
            <br> <b>Result:</b>
            <span id="moonDef">Empty</span>
        </div>
    </form>

    <script>
        $("#moonButton").click(function(event) {
            event.preventDefault();
            var url = "getMoon?q=" + $("#dateForm").val();
            url += "&loc=";
            url += encodeURI($("#locationForm").val());
            console.log(url);
            $.getJSON(url, function(data) {
                console.log(data);
                var everything;
                everything += "<ul>";
                var phase = data.curphase;
                var closest = data.closestphase.phase;
                var closestdate = data.closestphase.date;


                everything += "<li>" + "Current Moon Phase: " + phase + "</li>";
                everything += "<li>" + "Closest Phase: " + closest + ", on " + closestdate + "</li>";
                /*var nextPhase = data.phasedata[1].phase;
                var nextPhaseDate = data.phasedata[1].date;
                var nextPhaseTime = data.phasedata[1].time;
                console.log(data.phasedata[1]);
                everything += "<li>" + "Next Moon Phase will be: " + nextPhase + " on " + nextPhaseDate + " at " + nextPhaseTime + "</li>";
                */everything += "</ul>";
                $("#moonDef").html(everything);

            })
        });
    </script>
</body>

</html>
